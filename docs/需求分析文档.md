# 需求分析文档
## 业务流图

## 数据流图

## 数据词典

| 数据项名称         | 数据类型 | 含义            |
|---------------|------|---------------|
| UserID        | 字符串  | 唯一表示每个用户的用户名  |
| PassWord      | 字符串  | 唯一标识每个用户名对应密码 |
| ISBN          | 字符串  | 书的编号          |
| BookName      | 字符串  | 书的名字          |
| AuthorName    | 字符串  | 书的作者名字        |
| KeyWords      | 字符串  | 书的关键字         |
| StoreNum      | 整型   | 书的库存量         |
| PerPrice      | 整型   | 书的单价          |
| InNum         | 整型   | 书的进货量         |
| InPerPrice    | 整型   | 书的进货单价        |
| InTime        | 时间戳  | 书的进货时间        |
| SellNum       | 整型   | 书的销售量         |
| SellTime      | 时间戳  | 书的销售时间        |
| UserType      | 枚举   | 用户类型          |
| OperationType | 枚举   | 操作类型          |
| OperationTime | 时间戳  | 操作时间          |
| OutPut        | 整型   | 一定时间内的支出      |
| Input         | 整型   | 一定时间内的收入      |
| Profit        | 整型   | 一定时间内的利润      |
## 功能说明

| 模块名称     | 功能描述                                | 输入参数                                                | 输出参数                                           |
|----------|-------------------------------------|-----------------------------------------------------|------------------------------------------------|
| 用户注册     | 游客创建顾客账户                            | UserID,PassWord                                     | 字符串(成功/失败)                                     |
| 用户登录     | 用户登录系统，并开始对应操作                      | UserID,PassWord                                     | 字符串(成功/失败)                                     |
| 图书查询     | 按 ISBN/书名/作者/关键字的任意组合查询，从图书文件筛选匹配结果 | ISBN/BookName/AuthorName/KeyWord的组合                 | 相关图书的信息(含ISBN书名作者库存销售单价等信息）)                   |
| 图书购买     | 校验ISBN合法性及库存充足性，扣减库存，记录销售数据 ，统计收入   | ISBN（字符串）、SellNum（整型）                               | (成功/失败)(字符串)                                   |
| 图书进货     | 校验ISBN合法性，更新图书库存，记录采购数据， 统计支出       | ISBN（字符串）、InNum（整型）                                 | (成功/失败)(字符串)                                   |
| 图书信息录入   | 销售人员、店长录入新图书信息                      | ISBN、BookName、AuthorName、Keywords、StoreNum、PerPrice | 字符串(成功/失败)                                     |
| 修改图书信息   | 销售人员、店长修改新图书信息                      | ISBN、要修改的图书信息                                       | 字符串(成功/失败)                                     |
| 采购信息查询   | 店长查询指定时间采购记录                        | 开始时间(时间戳)、结束时间(时间戳)                                 | 采购记录列表（ISBN、InNum、InPerPrice、InTime 等）         |
| 销售情况查询   | 店长查询指定时间销售记录                        | 开始时间(时间戳)、结束时间(时间戳)                                 | 销售记录列表（ISBN、SellNum、PerPrice、SellTime等）        |
| 盈利信息查询   | 店长查询指定时间支出、收入和盈利                    | 开始时间(时间戳)、结束时间(时间戳)                                 | OutPut,InPut,Profit                            |
| 工作情况报告查询 | 店长查询指定员工操作记录                        | UserID、开始时间(时间戳)、结束时间(时间戳)                          | OperationType,OperationTime,以及操作对象的具体信息        |
| 工作日志查询   | 店长查询整个系统的操作记录                       | 开始时间(时间戳)、结束时间(时间戳)                                 | UserID,OperationType,OperationTime,以及操作对象的具体信息 |
| 创建账户     | 店长/销售人员创建账户                         | UserID、Password、UserType                            | 字符串(成功/失败)                                     |

## 用户交互设计

| 命令格式                                                                                 | 对应输出                                                                                            |
|--------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
| sign up (UserID) (PassWord)                                                          | successful! / failed!this account has existed.                                                  |
| log in (UserID) (PassWord)                                                           | successful! you are (账户类型). / failed in UserID/PassWord.                                        |
| log out                                                                              | 无输出，回到游客状态                                                                                      |
| exit                                                                                 | 无输出，退出系统                                                                                        |
| check book (ISBN)(BookName)(AuthorName)(KeyWords)                                    | ISBN:(ISBN) BookName:(BookName) AuthorName:(AuthorName) StoreNum:(StoreNum) PerPrice:(PerPrice) |
| buy book (ISBN)(SellNum)                                                             | Successful! / Fail!The storage is not enough.                                                   |
| In(ISBN)(InNum)(InPerPrice)                                                          | Successful! / Fail!The ISBN is not existed.                                                     |
| add book (ISBN)(BookName)(AuthorName)(KeyWords)(StorageNum)(PerPrice)                | Successful! / Fail!The ISBN has existed.                                                        |
| change book information (ISBN)(BookName)(AuthorName)(KeyWords)(StorageNum)(PerPrice) | Successful! / Fail!The ISBN is not existed.                                                     |
| create user(UserID)(PassWord)(UserType)                                              | successful! / failed!this account has existed.                                                  |
| check In_information(begin_time)(end_time)                                           | 采购记录列表（ISBN、InNum、InPerPrice、InTime）                                                            |
| check Sell_information(begin_time)(end_time)                                         | 销售记录列表（ISBN、SellNum、PerPrice、SellTime）                                                          |
| check profit (begin_time)(end_time)                                                  | OutPut:(OutPut),InPut:(InPut),Profit:(Profit)                                                   |
| check employee (begin_time)(end_time)(UserID)                                        | OperationType:(OperationType),OperationTime:(OperationTime),以及操作对象的具体信息                         |
| check system log (begin_time)(end_time)                                                                    | UserID:(UserID),OperationType:(OperationType),OperationType:(OperationType),以及操作对象的具体信息                      |
